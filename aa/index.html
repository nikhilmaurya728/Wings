<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Voice Assistant - Mobile Ready</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(to right, #e0f7fa, #ffffff);
      padding: 30px;
      text-align: center;
    }

    input,
    button {
      font-size: 18px;
      padding: 10px;
      margin: 10px auto;
      width: 90%;
      max-width: 400px;
      border-radius: 8px;
      border: 1px solid #ccc;
      display: block;
    }

    button {
      background-color: #2196F3;
      color: white;
      cursor: pointer;
      border: none;
    }

    button:hover {
      background-color: #1976D2;
    }

    #answerBox {
      margin-top: 20px;
      font-size: 18px;
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 8px rgba(0, 0, 0, 0.1);
      white-space: pre-line;
      text-align: left;
    }
  </style>
</head>

<body>

  <h2>üéôÔ∏è Teacher Voice Assistant</h2>
  <input id="userQuestion" type="text" placeholder="Ask something to Teacher..." />
  <button onclick="startListening()">üé§ Start Listening</button>
  <button onclick="stopListening()">üõë Stop Listening</button>

  <div id="answerBox">Your answer will appear here...</div>

  <script>
    const qaData = [
      {
        keywords: [["10", "ten", "20", "twenty", ""], ["fruit", "fruits", "falon", "fal"], ["name", "names", "ke naam"],["teacher"]],
        answer:
          "Here are 30 fruits:\n" +
          " 1. Apple - ‡§∏‡•á‡§¨\n 2. Banana - ‡§ï‡•á‡§≤‡§æ\n 3. Mango - ‡§Ü‡§Æ\n 4. Orange - ‡§∏‡§Ç‡§§‡§∞‡§æ\n 5. Papaya - ‡§™‡§™‡•Ä‡§§‡§æ\n" +
          " 6. Guava - ‡§Ö‡§Æ‡§∞‡•Ç‡§¶\n 7. Pineapple - ‡§Ö‡§®‡§æ‡§®‡§æ‡§∏\n 8. Watermelon - ‡§§‡§∞‡§¨‡•Ç‡§ú\n 9. Muskmelon - ‡§ñ‡§∞‡§¨‡•Ç‡§ú\n10. Grapes - ‡§Ö‡§Ç‡§ó‡•Ç‡§∞\n" +
          "11. Pomegranate - ‡§Ö‡§®‡§æ‡§∞\n12. Litchi - ‡§≤‡•Ä‡§ö‡•Ä\n13. Coconut - ‡§®‡§æ‡§∞‡§ø‡§Ø‡§≤\n14. Jackfruit - ‡§ï‡§ü‡§π‡§≤\n15. Lemon - ‡§®‡•Ä‡§Ç‡§¨‡•Ç\n" +
          "16. Cherry - ‡§ö‡•á‡§∞‡•Ä\n17. Plum - ‡§Ü‡§≤‡•Ç‡§ö‡§æ\n18. Fig - ‡§Ö‡§Ç‡§ú‡•Ä‡§∞\n19. Pear - ‡§®‡§æ‡§∂‡§™‡§æ‡§§‡•Ä\n20. Custard Apple - ‡§∏‡•Ä‡§§‡§æ‡§´‡§≤\n" +
          "21. Apricot - ‡§ñ‡•Å‡§¨‡§æ‡§®‡•Ä\n22. Blackberry - ‡§ú‡§æ‡§Æ‡•Å‡§®\n23. Blueberry - ‡§®‡•Ä‡§≤‡§¨‡§¶‡§∞‡•Ä\n24. Strawberry - ‡§∏‡•ç‡§ü‡•ç‡§∞‡•â‡§¨‡•á‡§∞‡•Ä\n25. Tamarind - ‡§á‡§Æ‡§≤‡•Ä\n" +
          "26. Dates - ‡§ñ‡§ú‡•Ç‡§∞\n27. Chikoo - ‡§ö‡•Ä‡§ï‡•Ç\n28. Starfruit - ‡§ï‡§Æ‡§∞‡§ñ\n29. Gooseberry - ‡§Ü‡§Å‡§µ‡§≤‡§æ\n30. Mulberry - ‡§∂‡§π‡§§‡•Ç‡§§"
      },

      {
        keywords: [["greeting", "hello"]],
        answer: "Hello! How may I help you today?"
      },
      {
        keywords: [["what is", "what"], ["your name", "call you"],],
        answer: "I am AI, Created by your School "
      },
      {
        keywords: [["what", "how much"], ["we know", "we no"], ["teacher"]],
        answer: "we"
      },
            {
        keywords: [["hello", "hi"], ["teacher"]],
        answer: "Hello! I am your teacher assistant. How can I help you?"
      },
    ];

    function matchesInput(input, keywordGroups) {
      return keywordGroups.every(group =>
        group.some(word => input.includes(word))
      );
    }

    function getAnswer() {
      const input = document.getElementById("userQuestion").value.toLowerCase();

      if (!input.includes("teacher")) return;

      let found = null;
      for (let item of qaData) {
        const groups = Array.isArray(item.keywords[0]) ? item.keywords : [item.keywords];
        if (matchesInput(input, groups)) {
          found = item.answer;
          break;
        }
      }

      const finalAnswer = found || "Sorry, I couldn't find an answer.";
      document.getElementById("answerBox").innerText = finalAnswer;
      speak(finalAnswer);
    }

    function speak(text) {
      const msg = new SpeechSynthesisUtterance(text);
      msg.lang = 'hi-IN'; // Use 'en-US' for English
      window.speechSynthesis.cancel(); // Stop previous
      window.speechSynthesis.speak(msg);
    }

    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.lang = 'en-US';
    let isListening = false;

    recognition.onresult = (event) => {
      const voiceInput = event.results[0][0].transcript;
      console.log("üé§ You said:", voiceInput);
      const inputBox = document.getElementById("userQuestion");
      inputBox.value = voiceInput;
      document.activeElement.blur();
      getAnswer();
    };

    recognition.onend = () => {
      if (isListening) recognition.start();
    };

    function startListening() {
      isListening = true;
      recognition.start();
    }

    function stopListening() {
      isListening = false;
      recognition.stop();
    }
  </script>
</body>

</html>